# 项目设计文档

## 1. 项目概述

本项目是一个简单的 HTTP 服务器，旨在处理客户端的 HTTP 请求并提供相应的资源。服务
器支持基本的 GET 请求，并能够解析请求中的 URL，从服务器文件系统中读取相应的资源
文件，并根据文件类型构建 HTTP 响应。

## 2. 项目架构

项目采用多线程架构，每个客户端连接都会创建一个独立的线程进行处理，以确保并发请求
的有效处理。主要模块包括：

- Server 模块: 负责创建套接字并监听客户端连接请求。每当有新的连接请求时，会创建
  一个新的线程处理客户端。
- Handler 模块: 处理客户端连接，接收、解析 HTTP 请求，构建并发送 HTTP 响应。主要
  功能是解码 URL，读取资源文件，构建 HTTP 响应等。
- Utils 模块: 提供一些辅助函数，包括 URL 解码、获取文件扩展名、获取 MIME 类型等
  。

## 3. 模块功能和实现细节

### 3.1 server 模块

- 功能描述: 创建套接字并监听客户端连接请求。
- 实现细节: 使用 Socket API 创建套接字，设置 SO_REUSEADDR 选项，监听指定端口。接
  受客户端连接请求后，创建新的线程调用 Handler 模块处理。

### 3.2 handler 模块

- 功能描述: 处理客户端连接，接收、解析 HTTP 请求，构建并发送 HTTP 响应。
- 实现细节: 使用正则表达式解析 HTTP 请求中的 URL。调用 Utils 模块的函数进行 URL
  解码，获取文件名和文件扩展名。读取服务器文件系统中的资源文件，获取文件大小和
  MIME 类型。构建 HTTP 响应，包括状态行、响应头和响应体。发送 HTTP 响应到客户端
  。

### 3.3 utils 模块

- 功能描述: 提供一些辅助函数，包括 URL 解码、获取文件扩展名、获取 MIME 类型等。
- 实现细节: 实现 URL 解码函数，将%20 之类的编码转换为可读的字符。获取文件扩展名
  的函数，通过查找文件名中的最后一个点（.）实现。获取 MIME 类型的函数，根据文件
  扩展名返回相应的 MIME 类型。
